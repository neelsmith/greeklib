<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>greeklib.js Test</title>
    <script src="greeklib.js"></script>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        pre { background-color: #f4f4f4; padding: 10px; border: 1px solid #ccc; white-space: pre-wrap; word-wrap: break-word; }
        table { border-collapse: collapse; margin-bottom: 20px; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #e9e9e9; }
        .error { color: red; font-weight: bold; }
        hr { margin: 30px 0; }
    </style>
</head>
<body>
    <h1>greeklib.js Tokenizer Test</h1>
    <div id="output"></div>

    <script>
        const testData = [
            "urn:cts:greekLit:tlg0552.tlg001.ap:1.proposition.1|Αʹ ἐάνπερ κύκλον / [πολύγωνον] , ἡ τοῦ / [περιγραφέντος] περί/[μετρος] [μείζων] τῆς περιμέ/[τρου] [τοῦ] . περὶ γὰρ κύκλον / [τὸ] [ὑ]/*π*οκείμενον. λέγω ὅτι ἡ [π]ερίμε/τρ[ος] [τοῦ] [ἐστὶν] / [τῆς] [περιμέτρου] [τοῦ] [κύκλου]. [ἐπεὶ] [γὰρ] / [συναμφότερος] [ἡ] [ΒΑΛ] [μείζων] [ἐστὶ] / [τῆς] [ΒΛ] [περιφερείας] [διὰ] τὸ / [τὰ] [αὐτὰ] [πέρατα] πε/ριλαμβάνειν τὴν περιφέρειαν , / συναμφότερος μὲν / ἡ ΓΒ τῆς ΔΒ, συναμφότερος / δὲ ἡ ΛΚ ΚΘ τῆς ΛΘ, συναμφό/[τερος] [δὲ] [ἡ] τῆς ΘΖ, ἔτι δὲ συν*αμ*/[φότερο]ς ἡ ΔΕ ΕΖ τῆς ΔΖ, [ἄρα] [ἡ] / τοῦ [μεί]/ζων ἐστὶν τῆς περιφερείας τοῦ κύκλ[ου] .",
            "urn:cts:greekLit:tlg0552.tlg001.ap:1.proposition.2|Βʹ / Δύο μεγεθῶν ἀνίσων δοθέντων / δυνατόν ἐστιν εὑρεῖν δύο εὐθείας / ἀνίσους, ὥστε τὴν μείζονα εὐθεῖαν / πρὸς τὴν ἐλάσσονα λόγον ἔχειν ἐλάσ/σονα ἤτοι μείζων μέγεθος πρὸς τὸ / ἔλασσον. ἔστω δύο μεγέθη ἄνισα / τὰ ΑΒΔ, καὶ ἔστω μείζων τὸ ΑΒ. λέγω / ὅτι δυνατόν ἐστι δύο εὐθείας ἀνί/σους εὑρεῖν τὸ εἰρημένον ἐπίταγ/μα ποιούσας. κείσθω διὰ τοῦ Βʹ τοῦ / Αʹ Εὐκλείδου τῶι Δ ἴσον τὸ ΒΓ, καὶ / κείσθω τις εὐθεῖα γραμμὴ ἡ ΖΗ: / τὸ δὴ ΓΑ ἑαυτῶι ἐπισυντιθέμενον / τοῦ Δ. πεπολλαπλασι/άσθω οὖν, καὶ ἔστω τὸ ΑΘ, καὶ ὁσαπλά/σιόν ἐστι τὸ ΑΘ τοῦ ΑΓ, τοσαυταπλά/σιος ἔστω ἡ ΖΗ τῆς ΖΕ: ἔστιν ἄρα, / ὡς τὸ ΘΑ πρὸς ΑΓ, οὕτως τὸ ΖΗ πρὸς ΗΕ: καὶ ἀνά/παλίν ἐστιν, ὡς ἡ ΗΕ πρὸς ΗΖ, οὕτως / τὸ ΑΓ πρὸς ΑΘ. καὶ ἐπεὶ μεῖζόν ἐστιν τὸ / ΑΘ τοῦ Δ, τουτέστι τοῦ ΓΒ, τὸ ἄρα ΓΑ / πρὸς τὸ ΑΘ λόγον ἐλάσσονα ἔχει ἤπερ / [τὸ] [ΓΑ] πρὸς ΓΒ. ἀλλ’ ὡς τὸ ΓΑ πρὸς ΑΘ, οὕτως / ἡ ΕΗ πρὸς ΗΖ: ἡ ΕΗ ἄρα πρὸς ΗΖ ἐλάσσονα / ἤπερ τὸ ΓΑ πρὸς τὸ _Γ_Β: καὶ / συνθέντι ἡ ΕΖ ἄρα πρὸς ΖΗ ἐλάσσονα / λόγον ἔχει ἤπερ τὸ ΑΒ πρὸς ΒΓ {} / {/μα}. ἴσον δὲ τὸ ΒΓ τῶι Δ: ἡ ΕΖ ἄρα πρὸς ΖΗ / ἐλάσσονα λόγον ἔχει ἤπερ τὸ ΑΒ / πρὸς τὸ Δ. εὑρημέναι εἰσὶν ἄρα δύο εὐ/θεῖαι ἄνισοι ποιοῦσαι τὸ εἰρημέ/νον ἐπίταγμα τουτέστιν τὴν μείζο/να πρὸς τὴν ἐλάσσονα λόγον ἔχoν / ἐλάσσονα ἢ τὸ μεῖζον μέγεθος / πρὸς τὸ ἔλασσον.",
            "urn:cts:greekLit:tlg0552.tlg001.ap:1.proposition.7|/ πυραμὶς βάσιν μὲν ἔχουσα ἰ/σόπλευρον τρίγωνον τὸ ΑΒΓ, καὶ ἐ/πεζεύχθωσαν αἱ ΔΑ ΔΓ ΔΒ: λέ/γω ὅτι τὰ ΑΔΒ ΑΔΓ τρίγωνα ἴσα / ἐστὶ τριγώνωι, οὗ ἡ μὲν βάσις ἴση / ἐστὶ τῆι περιμέτρωι τοῦ ΑΒΓ τρι/γώνου, ἡ δὲ ἀπὸ τῆς κορυφῆς / ἐπὶ τὴν βάσιν κάθετος ἴση τῆι / καθέτωι τῆι ἀπὸ τοῦ Δ ἐπὶ τὴν / ΒΓ ἀγομένην. ἤχθωσαν γὰρ κά/θετοι αἱ ΔΚ ΔΛ ΔΜ: αὗται ἄρα / ἴσαι ἀλλήλαις εἰσίν . καὶ κείσθω τρί/γωνον τὸ ΕΖΗ ἔχον τὴν μὲν ΕΖ / βάσιν τῆ περιμέτρωι τοῦ ΑΒΓ / τριγώνου ἴσην, τὴν δὲ ΗΘ κάθε/τον τῆι ΔΛ ἴσην. ἐπεὶ οὖν τὸ ὑπὸ / τῶν ΒΓ ΔΛ διπλάσιόν ἐστιν τοῦ / ΔΒΓ τριγώνου, ἔστι δὲ καὶ τὸ μὲν / ὑπὸ τῶν ΑΒ ΔΚ / ΑΒΔ τριγώνου, τὸ δὲ ὑπὸ ΑΓΔΜ / διπλάσιον τοῦ ΑΔΓ τριγώνου, / τὸ ἄρα ὑπὸ τῆς περιμέτρου τοῦ ΑΔΓ / τριγώνου, τουτέστι τῆς ΕΖ, καὶ τῆς / ΔΛ, τουτέστι τῆς ΗΘ, διπλάσιόν ἐστι / τῶν ΑΔΒ ΒΔΓ ΑΔΓ τριγώνων. / ἔστι δὲ καὶ τὸ ὑπὸ ΕΖΗΘ διπλάσιον / τοῦ ΕΗΖ τριγώνου: ἴσον ἄρα τὸ ΕΖΗ / τρίγωνον τοῖς ΑΛΒ ΒΔΓ ΑΔΓ τρι/γώνοις.",
            // Example from prompt description for URN generation of tokens
            "urn:cts:greekLit:tlg0552.tlg001.ap:1.proposition.1|Αʹ ἐάνπερ κύκλον πολύγωνον,",
            // Test case for work ID with 4 parts
            "urn:cts:greekLit:tlg0552.tlg001.ap.normalized:1.preface.1|Δόξα Πατρὶ καὶ Υἱῷ.",
            // Test case for punctuation at start (should show warning/error suffix)
            "urn:cts:greekLit:tlg0552.tlg001.ap:0.intro.1|, ἀρχὴ λόγου",
            // Test case for multiple punctuation
            "urn:cts:greekLit:tlg0552.tlg001.ap:0.intro.2|λόγος . : ; τέλος.",
            // Test case for invalid URN (too few workId parts)
            "urn:cts:greekLit:tlg0552.tlg001:1.1|Short work ID."
        ];

        const outputDiv = document.getElementById('output');

        // Option 1: Process one by one (as the problem description implies `tokenize` returns Array for its input)
        // testData.forEach((line, index) => {
        //     const h2 = document.createElement('h2');
        //     h2.textContent = `Test Case ${index + 1}`;
        //     outputDiv.appendChild(h2);

        //     const preLine = document.createElement('pre');
        //     preLine.textContent = "Input: " + line;
        //     outputDiv.appendChild(preLine);
            
        //     try {
        //         const tokens = greeklib.tokenize(line); // Pass single string
        //         // ... display tokens ...
        //     } // ...
        // });


        // Option 2: Process all at once if tokenize is designed to take an array
        // The prompt says: "tokenize will return an Array of objects of class Token." and
        // "accept 1 of 2 possible forms of parameter: 1) a single string or 2) an Array of strings"
        // This implies all tokens from all input strings are returned in one flat array.
        // Let's display per input string for clarity.

        testData.forEach((line, index) => {
            const h2 = document.createElement('h2');
            h2.textContent = `Test Case ${index + 1}`;
            outputDiv.appendChild(h2);

            const preLine = document.createElement('pre');
            preLine.textContent = line;
            outputDiv.appendChild(preLine);
            
            const pTokensTitle = document.createElement('p');
            pTokensTitle.innerHTML = "<strong>Tokens:</strong>";
            outputDiv.appendChild(pTokensTitle);

            try {
                // Call tokenize with a single string. It will handle it.
                // If we wanted to test array input to tokenize:
                // const tokens = greeklib.tokenize([line]); 
                // But the problem description implies the output array contains tokens from *all* input strings
                // if an array is passed. For display clarity, we process one line at a time here.
                const tokens = greeklib.tokenize(line); 
                
                if (tokens.length === 0 && line.split('|')[1] && line.split('|')[1].trim() !== "") {
                    const pNoTokens = document.createElement('p');
                    pNoTokens.textContent = "No tokens generated (check console for warnings if input was valid).";
                    outputDiv.appendChild(pNoTokens);
                } else if (tokens.length > 0) {
                    const table = document.createElement('table');
                    const header = table.createTHead().insertRow();
                    header.innerHTML = "<th>Seq. in Passage</th><th>URN</th><th>Text</th><th>Type</th>";
                    const tbody = table.createTBody();
                    tokens.forEach(token => {
                        const row = tbody.insertRow();
                        row.insertCell().textContent = token.sequence;
                        row.insertCell().textContent = token.urn;
                        row.insertCell().textContent = token.text;
                        row.insertCell().textContent = token.type;
                    });
                    outputDiv.appendChild(table);
                } else {
                     const pNoTokens = document.createElement('p');
                    pNoTokens.textContent = "No tokens generated (input text might be empty or only whitespace).";
                    outputDiv.appendChild(pNoTokens);
                }

            } catch (e) {
                const preError = document.createElement('p');
                preError.textContent = e.message;
                preError.className = 'error';
                outputDiv.appendChild(preError);
            }
            outputDiv.appendChild(document.createElement('hr'));
        });

    </script>
</body>
</html>